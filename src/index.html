<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--  引入Bootstrap样式文件  -->
    <link type="text/css" rel="stylesheet" href="./assets//css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="./assets//css/bootstrap-select.min.css" />
    <!--  引入Font Awesome字体样式文件  >
    <link type="text/css" rel="stylesheet" href="./assets/font/font-awesome.min.css" /-->
    <!--meta http-equiv="Access-Control-Allow-Origin" content="*"-->

    <!--引入bootstrap-slider 样式文件-->
    <link href="./assets/css/bootstrap-slider.css" rel="stylesheet" />
    <title>川金丝猴亲缘结构可视化V1</title>
    <style>
        body{margin: 0;overflow: hidden;}
    </style>
    
</head>

<link rel="stylesheet" href="./assets/css/base.css">
<link rel="stylesheet" href="./assets/css/content.css">
<body>
    <script type="text/javascript" src="./assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="./assets/js/popper.min.js"></script>
    <script type="text/javascript" src="./assets/js/bootstrap.min.js"></script>
    <!--script type="text/javascript" src="./assets/js/bootstrap-slider.min.js"></script-->
    <script type="text/javascript" src="./assets/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="./assets/js/bootstrap-treeview.js"></script>
    <script type="text/javascript" src="./assets/js/bootstrap-select.min.js"></script>
    
    <!--script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g6-3.1.0/build/g6.js"></script-->


   <div class="box">
    <div id="mountNode" style="display: none;"></div>
    <div class="header">
        <!-- <input type="color" value="#2D9900"/> -->
        <!-- <div style="display: inline;">
          <input type="file" />
        </div> -->
        <div style="display: inline; height: 30px;">
          <label style="color: white;">根据ID选择Monkey</label>
          <select class="selectpicker" data-live-search="true" id="monkeySelecter"  data-style="btn-info" data-none-selected-text="选择Monkey的ID" title="选择Monkey的ID" multiple data-actions-box="true">
            
          </select>
        </div>
        
        
        
        <div class="dropdown" id="idDropdown" style="align-self: center; margin-left: 10%; white-space: nowrap; display: none;">
                <label style="color: white;">根据ID选择Monkey</label>
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  选择Monkey 的 ID
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenu2" style="overflow-y: auto; max-height:600px;">
                </div>
        </div>
        <div id="mode" style="display: inline;height: 30px; white-space: nowrap;">
            <!--使用时间范围选择替代时间模式和时可选择-->
            <div class="custom-control custom-radio custom-control-inline" style="display: none;">
                <input type="radio" id="isolateTick" name="custom" class="custom-control-input">
                <label class="custom-control-label" for="isolateTick">当前时间产生的亲缘关系</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline" style="display: none;">
                <input type="radio" id="accumulateTick" name="custom" class="custom-control-input" checked>
                <label class="custom-control-label" for="accumulateTick">累积时间单位亲缘关系</label>
            </div>

            <div class="dropdown" id="tickDropdown" style="align-self: center; white-space: nowrap; display: none;">
                <label style="color: white;">当前时间：</label>
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  选择时间
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenu2" style="overflow-y: auto;min-height: 50px;">
                </div>
            </div>
            <div class="tick-range" style="align-self: center; white-space: nowrap; display: inline; width: 20%;">
                <input id="tickRangeToggle" type="checkbox" checked/> Enabled
                <label>选择亲缘关系时间范围：</label>
                <b id="tickLow">0</b>&nbsp;&nbsp;
                <input id="tickRange" type="text" class="span2" style="width: 10%;" value="" data-slider-id="slider" data-slider-min="0" data-slider-max="0" data-slider-step="1" data-slider-value="[0,0]"/>
                &nbsp;&nbsp;<b id="tickHigh">0</b>
            </div>&nbsp;&nbsp;&nbsp;

            <div class="tick-range" style="align-self: center; white-space: nowrap; display: inline; width: 20%;">
              <input id="tickRangeStrucToggle" type="checkbox" checked/> Enabled
              <label>选择社会组成时间范围：</label>
              <b id="tickLowStruc">0</b>&nbsp;&nbsp;
              <input id="tickRangeStruc" type="text" class="span2" style="width: 10%;" value="" data-slider-id="sliderStruc" data-slider-min="0" data-slider-max="0" data-slider-step="1" data-slider-value="[0,0]"/>
              &nbsp;&nbsp;<b id="tickHighStruc">0</b>
            </div>

          <div id="tickRange"></div>
          <div id="tickRangeStruc"></div>
          
        </div>
        <!-- 可定制的要素 -->
        <div style="align-self: center; white-space: nowrap; display: block; width: 100%;margin: 0; padding: 0; text-align: center;">
          <div id="customKeyDiv" style="width: 100%; margin: 0; padding: 0; text-align: center;">
            <a class="collapsed btn btn-link glyphicon glyphicon-chevron-down" type="button"  style="color: white; font-weight: bolder; font-size: 15px; padding-top: 0;"
            data-toggle="collapse" data-target="#customKeyCollapse" aria-expanded="false" aria-controls="customKeyCollapse">
              定制显示要素
            </a>
          </div>
          <div id="customKeyCollapse" class="collapse" aria-labelledby="customKeyDiv" data-parent="#customKeyDiv"
           style="background-color: #fbfbfbc9 ; border-radius: 5px; margin: 5px 30%; padding: 0; position: relative; z-index: 10000; text-align: left;">

          </div>
        </div>

    </div>
    <div class="main">
        <div class="left">left</div>
        <div class="center">
        </div>

        <div class="right">

            <div class="accordion" id="accordionExample" >
                <div class="card">
                  <div class="card-header" id="headingOne">
                      <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        被选中的金丝猴的信息
                      </button>
                  </div>
                  <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#headingOne">
                    <div class="card-body" style="white-space:normal; word-break:break-all;overflow:hidden;">
                        <ul class="list-group" id="monkey_info" style="white-space: normal; font-family:Consolas; ">
                            <li class="list-group-item list-group-item-success" value="ID">ID: </li>
                            <li class="list-group-item list-group-item-success" value="NAME">NAME: </li>
                            <li class="list-group-item list-group-item-success" value="GENDA">GENDA: </li>
                            <li class="list-group-item list-group-item-success" value="GENDA">入群时间: </li>
                            <li class="list-group-item list-group-item-success" value="年龄段">年龄段: </li>
                            <li class="list-group-item list-group-item-success" value="分身所属单元">分身所属单元: </li>
                            <li class="list-group-item list-group-item-success" value="当前所属单元">当前所属单元: </li>
                            <li class="list-group-item list-group-item-success" value="孩子" data-toggle="tooltip" data-placement="top" title="孩子的ID">孩子: </li>
                            <li class="list-group-item list-group-item-success" value="母亲" data-toggle="tooltip" data-placement="top" title="母亲的名字及ID">母亲: </li>
                            <li class="list-group-item list-group-item-success" value="父亲" data-toggle="tooltip" data-placement="top" title="父亲的名字及ID">父亲: </li>
                            <li class="list-group-item list-group-item-success" value="isAlive" data-toggle="tooltip" data-placement="top" title="是否存活">isAlive: </li>
                            <li class="list-group-item list-group-item-success" value="inCommu" data-toggle="tooltip" data-placement="top" title="是否在社群中">inCommu: </li>
                            <li class="list-group-item list-group-item-success" value="isMirror" data-toggle="tooltip" data-placement="top" title="是否是分身">isMirror: </li>
                            <button type="button" class="btn btn-danger" id="saveLog"  style="width: 40%; align-self: center;margin: .5em 0 0 .5em; font-size: medium; display: none;" data-toggle="tooltip" data-placement="top" title="保存日志">save log</button>
                        </ul>
                        <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#monkeyLifeInfo" aria-expanded="false" aria-controls="monkeyLifeInfo"
                        style="width: 90%; margin: 3px 0 1.5px 5%; display: inline;">显示生平信息</button>
                        <div class="collapse" id="monkeyLifeInfo">

                        </div>
                        
                    </div>
                  </div>
                </div>
                <div class="card">
                  <div class="card-header" id="headingTwo" style="white-space:normal; word-break:break-all;overflow:hidden;">
                      <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        被选中的单元的信息
                      </button>
                  </div>
                  <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#headingTwo">
                    <div class="card-body" style="white-space:normal; word-break:break-all;overflow:hidden;">
                      <ul class="list-group" id="unit_info" style="white-space: normal; font-family:Consolas; ">
                        <li class="list-group-item list-group-item-success" value="ID">ID: </li>
                        <li class="list-group-item list-group-item-success" value="NAME">NAME: </li>
                        <li class="list-group-item list-group-item-success" value="CREATED">创建时间: </li>
                      </ul>
                      <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#unitLifeInfo" aria-expanded="false" aria-controls="unitLifeInfo"
                        style="width: 90%; margin: 3px 0 1.5px 5%; display: inline;">显示历史信息</button>
                        <div class="collapse" id="unitLifeInfo">
                          <ul id="unitTickList" style="white-space: normal; font-family:Consolas; ">

                          </ul>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="card">
                  <div class="card-header" id="headingThree">
                      <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        社群信息
                      </button>
                  </div>
                  <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#headingThree">
                    <div class="card-body" style="white-space:normal; word-break:break-all;overflow:hidden;">
                        <ul id="tickList" style="white-space: normal; font-family:Consolas; ">

                        </ul>
                    </div>
                  </div>
                </div>
            </div>

            <div style="margin: 5px;align-items: center;" >
                <!--button type="button" class="btn btn-danger" id="prev"  style="width: 40%; align-self: center;margin: .5em 0 0 .5em; font-size: medium; display: none;" data-toggle="tooltip" data-placement="top" title="回退一个时间单位的亲缘关系">TICK-BACK</button>
                <button type="button" class="btn btn-danger" id="saveLog"  style="width: 40%; align-self: center;margin: .5em 0 0 .5em; font-size: medium; display: none;" data-toggle="tooltip" data-placement="top" title="保存日志">save log</button-->
                
                <button type="button" class="btn btn-danger" id="next"  style="width: 80%; align-self: center;margin: .5em 0 0 .5em; font-size: medium; display: inline;" data-toggle="tooltip" data-placement="top" title="增加一个时间单位的亲缘关系">生成下一时刻亲缘关系</button> 
            </div>
            
        </div>
    </div>
    <div class="footer"></div>
</div>
<script src="../tsdist/bundle.js"> </script>
<script>
    $("#stats > div").css({
        top: $("div.header").css("height"),
        margin: "1.5px 0px 0px 1.5px",
    })
    $('#tickRangeStruc').slider({
        formatter: function (value) {
            return  value;
        },
        tooltip_split: true,
        tooltip: "always",
        tooltip_position: "bottom",
    })
    $("#tickRangeToggle").click(function() {
      if(this.checked) {
        $("#tickRange").slider("enable");
      }
      else {
        $("#tickRange").slider("disable");
      }
    });
    $("#tickRangeStrucToggle").click(function() {
      if(this.checked) {
        $("#tickRangeStruc").slider("enable");
      }
      else {
        $("#tickRangeStruc").slider("disable");
      }
    });
    var tree = [
  {
    text: "社会组成要素",
    //selectable: false,
    selectedIcon: "",
    nodes: [
      {
        text: "入群",
      },
      {
        text: "退群"
      },
      {
        text: "迁移"
      },
      {
        text: "主雄变更"
      },
      {
        text: "新增单元"
      },
      {
        text: "死亡"
      }
    ]
  },
  {
    text: "未采样个体"
  },
  {
    text: "未涉及个体"
  },
 
];

$('#customKeyCollapse').treeview({
  data: tree,         // data is not optional
  levels: 5,
  backColor: 'green',
  multiSelect: true,
  checkedIcon: "glyphicon glyphicon-check",
  //selectedIcon: "glyphicon glyphicon-check",
  showCheckbox: true,
});

$('#customKeyCollapse').on('nodeChecked',function(event, data){
     console.log("evt:", event, " data:", data)
     if(!data.nodes) return;
     let tree = $('#customKeyCollapse');
     data.nodes.forEach( e => {
       tree.treeview('checkNode', [ e.nodeId, { silent: true } ]);
     })
     
})

$('#customKeyCollapse').on('nodeUnchecked',function(event, data){
     console.log("evt:", event, " data:", data)
     if(!data.nodes) return;
     let tree = $('#customKeyCollapse');
     data.nodes.forEach( e => {
       tree.treeview('uncheckNode', [ e.nodeId, { silent: true } ]);
     })
     
})

    
</script>

</body>
</html>
